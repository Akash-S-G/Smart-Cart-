{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\akash\\\\Desktop\\\\MODEL\\\\SmartCart\\\\frontend\\\\src\\\\components\\\\CameraFeed.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { io } from 'socket.io-client';\nimport { toast } from 'react-hot-toast';\nimport useCartStore from '../stores/cartStore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = process.env.REACT_APP_API_URL || 'http://192.168.74.207:5000';\nconst CameraFeed = ({\n  cartId\n}) => {\n  _s();\n  const [isConnected, setIsConnected] = useState(false);\n  const [lastDetection, setLastDetection] = useState(null);\n  const [lastAddedProduct, setLastAddedProduct] = useState({\n    id: null,\n    confidence: 0\n  });\n  const [useWebcam, setUseWebcam] = useState(false);\n  const socketRef = useRef(null);\n  const imageRef = useRef(null);\n  const videoRef = useRef(null);\n  const addItem = useCartStore(state => state.addItem);\n\n  // Webcam stream logic\n  useEffect(() => {\n    let stream;\n    if (useWebcam && videoRef.current) {\n      navigator.mediaDevices.getUserMedia({\n        video: true\n      }).then(s => {\n        stream = s;\n        videoRef.current.srcObject = stream;\n      }).catch(err => {\n        toast.error('Webcam access denied or not available');\n      });\n    }\n    return () => {\n      if (stream) {\n        stream.getTracks().forEach(track => track.stop());\n      }\n    };\n  }, [useWebcam]);\n\n  // ESP32 connection status (for UI only)\n  useEffect(() => {\n    if (useWebcam) return;\n    socketRef.current = io(API_URL, {\n      transports: ['websocket'],\n      upgrade: false,\n      reconnection: true,\n      reconnectionAttempts: 5,\n      reconnectionDelay: 1000,\n      reconnectionDelayMax: 5000,\n      timeout: 60000,\n      path: '/socket.io',\n      query: {\n        cart_id: cartId\n      }\n    });\n    socketRef.current.on('connect', () => {\n      setIsConnected(true);\n    });\n    socketRef.current.on('disconnect', () => {\n      setIsConnected(false);\n    });\n    return () => {\n      if (socketRef.current) socketRef.current.disconnect();\n    };\n  }, [cartId, useWebcam]);\n\n  // Poll latest image\n  useEffect(() => {\n    if (useWebcam) return;\n    let lastImageUrl = null;\n    const fetchImage = () => {\n      fetch(`${API_URL}/latest_image?_t=${Date.now()}`).then(res => {\n        if (!res.ok) throw new Error('No image');\n        return res.blob();\n      }).then(blob => {\n        if (imageRef.current) {\n          if (lastImageUrl) URL.revokeObjectURL(lastImageUrl);\n          lastImageUrl = URL.createObjectURL(blob);\n          imageRef.current.src = lastImageUrl;\n        }\n      }).catch(() => {\n        if (imageRef.current) imageRef.current.src = '';\n      });\n    };\n    fetchImage();\n    const interval = setInterval(fetchImage, 200);\n    return () => {\n      clearInterval(interval);\n      if (lastImageUrl) URL.revokeObjectURL(lastImageUrl);\n    };\n  }, [useWebcam]);\n\n  // Webcam: capture and send frame for prediction\n  useEffect(() => {\n    if (!useWebcam) return;\n    let interval;\n    const sendWebcamFrame = () => {\n      if (!videoRef.current) return;\n      const video = videoRef.current;\n      const canvas = document.createElement('canvas');\n      canvas.width = video.videoWidth || 224;\n      canvas.height = video.videoHeight || 224;\n      const ctx = canvas.getContext('2d');\n      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n      const dataUrl = canvas.toDataURL('image/jpeg');\n      const base64 = dataUrl.split(',')[1];\n      // Send to backend for prediction\n      fetch(`${API_URL}/predict_product`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          cart_id: cartId || 'webcam',\n          image_base64: base64\n        })\n      });\n    };\n    interval = setInterval(sendWebcamFrame, 1000); // 1 frame per second\n    return () => clearInterval(interval);\n  }, [useWebcam, cartId]);\n\n  // Poll latest prediction (works for both ESP32 and webcam)\n  useEffect(() => {\n    const fetchPrediction = () => {\n      fetch(`${API_URL}/latest_prediction`).then(res => res.json()).then(data => {\n        if (data && typeof data.confidence !== 'undefined' && data.product_name) {\n          setLastDetection(data);\n          if (data.product_name !== 'Unknown or Not Recognized' && typeof data.confidence === 'number' && data.confidence >= 0.85) {\n            if (lastAddedProduct.id !== data.product_id || lastAddedProduct.confidence < 0.85) {\n              const price = Math.floor(Math.random() * 100) + 1;\n              addItem({\n                id: data.product_id,\n                name: data.product_name,\n                price,\n                confidence: data.confidence\n              });\n              setLastAddedProduct({\n                id: data.product_id,\n                confidence: data.confidence\n              });\n              toast.success(`Added to cart: ${data.product_name} (₹${price})`);\n            }\n          } else {\n            if (lastAddedProduct.id === data.product_id && data.confidence < 0.85) {\n              setLastAddedProduct({\n                id: null,\n                confidence: 0\n              });\n            }\n          }\n        }\n      }).catch(() => {});\n    };\n    fetchPrediction();\n    const interval = setInterval(fetchPrediction, 1000);\n    return () => clearInterval(interval);\n  }, [cartId, addItem, lastAddedProduct, useWebcam]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-4 rounded-lg shadow\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-semibold mb-2\",\n        children: \"Camera Feed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2 mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `w-3 h-3 rounded-full ${isConnected ? 'bg-green-500' : 'bg-red-500'}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm text-gray-600\",\n          children: isConnected ? 'Connected' : 'Disconnected'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `px-3 py-1 rounded mr-2 ${!useWebcam ? 'bg-blue-500 text-white' : 'bg-gray-200'}`,\n          onClick: () => setUseWebcam(false),\n          children: \"ESP32 Camera\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `px-3 py-1 rounded ${useWebcam ? 'bg-blue-500 text-white' : 'bg-gray-200'}`,\n          onClick: () => setUseWebcam(true),\n          children: \"Webcam / Mobile Camera\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative aspect-video bg-gray-100 rounded-lg overflow-hidden mb-4\",\n      children: [!useWebcam ? /*#__PURE__*/_jsxDEV(\"img\", {\n        ref: imageRef,\n        alt: \"Camera feed\",\n        className: \"w-full h-full object-cover\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        autoPlay: true,\n        playsInline: true,\n        className: \"w-full h-full object-cover\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 11\n      }, this), !isConnected && !useWebcam && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 text-white\",\n        children: \"Connecting to camera...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this), lastDetection && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-3 bg-blue-50 rounded-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"font-medium mb-1\",\n        children: \"Last Prediction\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-gray-600\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Product: \", lastDetection.product_name || 'N/A']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Confidence: \", typeof lastDetection.confidence === 'number' && !isNaN(lastDetection.confidence) ? (lastDetection.confidence * 100).toFixed(1) + '%' : 'N/A']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 165,\n    columnNumber: 5\n  }, this);\n};\n_s(CameraFeed, \"G3TTOz7O2678wJKFt8DnTA0kxUc=\", false, function () {\n  return [useCartStore];\n});\n_c = CameraFeed;\nexport default CameraFeed;\nvar _c;\n$RefreshReg$(_c, \"CameraFeed\");","map":{"version":3,"names":["React","useEffect","useState","useRef","io","toast","useCartStore","jsxDEV","_jsxDEV","API_URL","process","env","REACT_APP_API_URL","CameraFeed","cartId","_s","isConnected","setIsConnected","lastDetection","setLastDetection","lastAddedProduct","setLastAddedProduct","id","confidence","useWebcam","setUseWebcam","socketRef","imageRef","videoRef","addItem","state","stream","current","navigator","mediaDevices","getUserMedia","video","then","s","srcObject","catch","err","error","getTracks","forEach","track","stop","transports","upgrade","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","timeout","path","query","cart_id","on","disconnect","lastImageUrl","fetchImage","fetch","Date","now","res","ok","Error","blob","URL","revokeObjectURL","createObjectURL","src","interval","setInterval","clearInterval","sendWebcamFrame","canvas","document","createElement","width","videoWidth","height","videoHeight","ctx","getContext","drawImage","dataUrl","toDataURL","base64","split","method","headers","body","JSON","stringify","image_base64","fetchPrediction","json","data","product_name","product_id","price","Math","floor","random","name","success","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","ref","alt","autoPlay","playsInline","isNaN","toFixed","_c","$RefreshReg$"],"sources":["C:/Users/akash/Desktop/MODEL/SmartCart/frontend/src/components/CameraFeed.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { io } from 'socket.io-client';\nimport { toast } from 'react-hot-toast';\nimport useCartStore from '../stores/cartStore';\n\nconst API_URL = process.env.REACT_APP_API_URL || 'http://192.168.74.207:5000';\n\nconst CameraFeed = ({ cartId }) => {\n  const [isConnected, setIsConnected] = useState(false);\n  const [lastDetection, setLastDetection] = useState(null);\n  const [lastAddedProduct, setLastAddedProduct] = useState({ id: null, confidence: 0 });\n  const [useWebcam, setUseWebcam] = useState(false);\n  const socketRef = useRef(null);\n  const imageRef = useRef(null);\n  const videoRef = useRef(null);\n  const addItem = useCartStore(state => state.addItem);\n\n  // Webcam stream logic\n  useEffect(() => {\n    let stream;\n    if (useWebcam && videoRef.current) {\n      navigator.mediaDevices.getUserMedia({ video: true })\n        .then(s => {\n          stream = s;\n          videoRef.current.srcObject = stream;\n        })\n        .catch(err => {\n          toast.error('Webcam access denied or not available');\n        });\n    }\n    return () => {\n      if (stream) {\n        stream.getTracks().forEach(track => track.stop());\n      }\n    };\n  }, [useWebcam]);\n\n  // ESP32 connection status (for UI only)\n  useEffect(() => {\n    if (useWebcam) return;\n    socketRef.current = io(API_URL, {\n      transports: ['websocket'],\n      upgrade: false,\n      reconnection: true,\n      reconnectionAttempts: 5,\n      reconnectionDelay: 1000,\n      reconnectionDelayMax: 5000,\n      timeout: 60000,\n      path: '/socket.io',\n      query: { cart_id: cartId }\n    });\n    socketRef.current.on('connect', () => {\n      setIsConnected(true);\n    });\n    socketRef.current.on('disconnect', () => {\n      setIsConnected(false);\n    });\n    return () => {\n      if (socketRef.current) socketRef.current.disconnect();\n    };\n  }, [cartId, useWebcam]);\n\n  // Poll latest image\n  useEffect(() => {\n    if (useWebcam) return;\n    let lastImageUrl = null;\n    const fetchImage = () => {\n      fetch(`${API_URL}/latest_image?_t=${Date.now()}`)\n        .then(res => {\n          if (!res.ok) throw new Error('No image');\n          return res.blob();\n        })\n        .then(blob => {\n          if (imageRef.current) {\n            if (lastImageUrl) URL.revokeObjectURL(lastImageUrl);\n            lastImageUrl = URL.createObjectURL(blob);\n            imageRef.current.src = lastImageUrl;\n          }\n        })\n        .catch(() => {\n          if (imageRef.current) imageRef.current.src = '';\n        });\n    };\n    fetchImage();\n    const interval = setInterval(fetchImage, 200);\n    return () => {\n      clearInterval(interval);\n      if (lastImageUrl) URL.revokeObjectURL(lastImageUrl);\n    };\n  }, [useWebcam]);\n\n  // Webcam: capture and send frame for prediction\n  useEffect(() => {\n    if (!useWebcam) return;\n    let interval;\n    const sendWebcamFrame = () => {\n      if (!videoRef.current) return;\n      const video = videoRef.current;\n      const canvas = document.createElement('canvas');\n      canvas.width = video.videoWidth || 224;\n      canvas.height = video.videoHeight || 224;\n      const ctx = canvas.getContext('2d');\n      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n      const dataUrl = canvas.toDataURL('image/jpeg');\n      const base64 = dataUrl.split(',')[1];\n      // Send to backend for prediction\n      fetch(`${API_URL}/predict_product`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          cart_id: cartId || 'webcam',\n          image_base64: base64\n        })\n      });\n    };\n    interval = setInterval(sendWebcamFrame, 1000); // 1 frame per second\n    return () => clearInterval(interval);\n  }, [useWebcam, cartId]);\n\n  // Poll latest prediction (works for both ESP32 and webcam)\n  useEffect(() => {\n    const fetchPrediction = () => {\n      fetch(`${API_URL}/latest_prediction`)\n        .then(res => res.json())\n        .then(data => {\n          if (data && typeof data.confidence !== 'undefined' && data.product_name) {\n            setLastDetection(data);\n            if (\n              data.product_name !== 'Unknown or Not Recognized' &&\n              typeof data.confidence === 'number' &&\n              data.confidence >= 0.85\n            ) {\n              if (\n                lastAddedProduct.id !== data.product_id ||\n                lastAddedProduct.confidence < 0.85\n              ) {\n                const price = Math.floor(Math.random() * 100) + 1;\n                addItem({\n                  id: data.product_id,\n                  name: data.product_name,\n                  price,\n                  confidence: data.confidence\n                });\n                setLastAddedProduct({ id: data.product_id, confidence: data.confidence });\n                toast.success(`Added to cart: ${data.product_name} (₹${price})`);\n              }\n            } else {\n              if (\n                lastAddedProduct.id === data.product_id &&\n                data.confidence < 0.85\n              ) {\n                setLastAddedProduct({ id: null, confidence: 0 });\n              }\n            }\n          }\n        })\n        .catch(() => {});\n    };\n    fetchPrediction();\n    const interval = setInterval(fetchPrediction, 1000);\n    return () => clearInterval(interval);\n  }, [cartId, addItem, lastAddedProduct, useWebcam]);\n\n  return (\n    <div className=\"bg-white p-4 rounded-lg shadow\">\n      <div className=\"mb-4\">\n        <h2 className=\"text-xl font-semibold mb-2\">Camera Feed</h2>\n        <div className=\"flex items-center space-x-2 mb-2\">\n          <div\n            className={`w-3 h-3 rounded-full ${isConnected ? 'bg-green-500' : 'bg-red-500'}`}\n          />\n          <span className=\"text-sm text-gray-600\">\n            {isConnected ? 'Connected' : 'Disconnected'}\n          </span>\n        </div>\n        <div className=\"mb-2\">\n          <button\n            className={`px-3 py-1 rounded mr-2 ${!useWebcam ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n            onClick={() => setUseWebcam(false)}\n          >\n            ESP32 Camera\n          </button>\n          <button\n            className={`px-3 py-1 rounded ${useWebcam ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n            onClick={() => setUseWebcam(true)}\n          >\n            Webcam / Mobile Camera\n          </button>\n        </div>\n      </div>\n\n      <div className=\"relative aspect-video bg-gray-100 rounded-lg overflow-hidden mb-4\">\n        {!useWebcam ? (\n          <img\n            ref={imageRef}\n            alt=\"Camera feed\"\n            className=\"w-full h-full object-cover\"\n          />\n        ) : (\n          <video\n            ref={videoRef}\n            autoPlay\n            playsInline\n            className=\"w-full h-full object-cover\"\n          />\n        )}\n        {!isConnected && !useWebcam && (\n          <div className=\"absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 text-white\">\n            Connecting to camera...\n          </div>\n        )}\n      </div>\n\n      {lastDetection && (\n        <div className=\"p-3 bg-blue-50 rounded-lg\">\n          <h3 className=\"font-medium mb-1\">Last Prediction</h3>\n          <div className=\"text-sm text-gray-600\">\n            <p>Product: {lastDetection.product_name || 'N/A'}</p>\n            <p>\n              Confidence: {typeof lastDetection.confidence === 'number' && !isNaN(lastDetection.confidence)\n                ? (lastDetection.confidence * 100).toFixed(1) + '%'\n                : 'N/A'}\n            </p>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CameraFeed;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}