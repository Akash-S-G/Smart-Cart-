{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\akash\\\\Desktop\\\\MODEL\\\\frontend\\\\src\\\\pages\\\\CameraView.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { io } from 'socket.io-client';\nimport { useAuthStore } from '../stores/authStore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CameraView() {\n  _s();\n  const videoRef = useRef(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const [error, setError] = useState(null);\n  const [detectedItems, setDetectedItems] = useState([]);\n  const socketRef = useRef(null);\n  const {\n    isAuthenticated\n  } = useAuthStore();\n  useEffect(() => {\n    if (!isAuthenticated) return;\n\n    // Connect to WebSocket server\n    socketRef.current = io('http://localhost:5000/ws/camera', {\n      transports: ['websocket'],\n      upgrade: false\n    });\n\n    // Handle connection events\n    socketRef.current.on('connect', () => {\n      console.log('Connected to camera stream');\n      setIsConnected(true);\n      setError(null);\n    });\n    socketRef.current.on('disconnect', () => {\n      console.log('Disconnected from camera stream');\n      setIsConnected(false);\n    });\n\n    // Handle incoming processed frames\n    socketRef.current.on('processed_frame', data => {\n      if (videoRef.current) {\n        // Convert binary frame data to blob URL\n        const blob = new Blob([data.frame], {\n          type: 'image/jpeg'\n        });\n        const imageUrl = URL.createObjectURL(blob);\n\n        // Update video source\n        videoRef.current.src = imageUrl;\n\n        // Update detected items if available\n        if (data.detected_items) {\n          setDetectedItems(data.detected_items);\n        }\n\n        // Clean up blob URL\n        URL.revokeObjectURL(imageUrl);\n      }\n    });\n    socketRef.current.on('error', error => {\n      console.error('Camera stream error:', error);\n      setError(error.message);\n    });\n\n    // Cleanup on unmount\n    return () => {\n      if (socketRef.current) {\n        socketRef.current.disconnect();\n      }\n    };\n  }, [isAuthenticated]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100 py-6 flex flex-col justify-center sm:py-12\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative py-3 sm:max-w-xl sm:mx-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative px-4 py-10 bg-white mx-8 md:mx-0 shadow rounded-3xl sm:p-10\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"max-w-md mx-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"divide-y divide-gray-200\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"py-8 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-2xl font-bold mb-4\",\n                children: \"Smart Cart Camera\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 17\n              }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-red-50 p-4 rounded-md mb-4\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-red-700\",\n                  children: error\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 78,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  ref: videoRef,\n                  className: \"w-full h-auto rounded-lg shadow-lg\",\n                  alt: \"Camera Stream\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 83,\n                  columnNumber: 19\n                }, this), !isConnected && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 rounded-lg\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-white\",\n                    children: \"Connecting to camera...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 91,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 17\n              }, this), detectedItems.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-lg font-semibold mb-2\",\n                  children: \"Detected Items:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"space-y-2\",\n                  children: detectedItems.map((item, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: \"flex items-center space-x-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"w-4 h-4 bg-green-500 rounded-full\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 102,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [item.name, \" - \", item.confidence, \"%\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 103,\n                      columnNumber: 27\n                    }, this)]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 101,\n                    columnNumber: 25\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 99,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}\n_s(CameraView, \"f1CmKA6GoRVyuN/oNstjFV7P2Yo=\", false, function () {\n  return [useAuthStore];\n});\n_c = CameraView;\nexport default CameraView;\nvar _c;\n$RefreshReg$(_c, \"CameraView\");","map":{"version":3,"names":["React","useEffect","useRef","useState","io","useAuthStore","jsxDEV","_jsxDEV","CameraView","_s","videoRef","isConnected","setIsConnected","error","setError","detectedItems","setDetectedItems","socketRef","isAuthenticated","current","transports","upgrade","on","console","log","data","blob","Blob","frame","type","imageUrl","URL","createObjectURL","src","detected_items","revokeObjectURL","message","disconnect","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","alt","length","map","item","index","name","confidence","_c","$RefreshReg$"],"sources":["C:/Users/akash/Desktop/MODEL/frontend/src/pages/CameraView.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { io } from 'socket.io-client';\r\nimport { useAuthStore } from '../stores/authStore';\r\n\r\nfunction CameraView() {\r\n  const videoRef = useRef(null);\r\n  const [isConnected, setIsConnected] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [detectedItems, setDetectedItems] = useState([]);\r\n  const socketRef = useRef(null);\r\n  const { isAuthenticated } = useAuthStore();\r\n\r\n  useEffect(() => {\r\n    if (!isAuthenticated) return;\r\n\r\n    // Connect to WebSocket server\r\n    socketRef.current = io('http://localhost:5000/ws/camera', {\r\n      transports: ['websocket'],\r\n      upgrade: false\r\n    });\r\n\r\n    // Handle connection events\r\n    socketRef.current.on('connect', () => {\r\n      console.log('Connected to camera stream');\r\n      setIsConnected(true);\r\n      setError(null);\r\n    });\r\n\r\n    socketRef.current.on('disconnect', () => {\r\n      console.log('Disconnected from camera stream');\r\n      setIsConnected(false);\r\n    });\r\n\r\n    // Handle incoming processed frames\r\n    socketRef.current.on('processed_frame', (data) => {\r\n      if (videoRef.current) {\r\n        // Convert binary frame data to blob URL\r\n        const blob = new Blob([data.frame], { type: 'image/jpeg' });\r\n        const imageUrl = URL.createObjectURL(blob);\r\n        \r\n        // Update video source\r\n        videoRef.current.src = imageUrl;\r\n        \r\n        // Update detected items if available\r\n        if (data.detected_items) {\r\n          setDetectedItems(data.detected_items);\r\n        }\r\n        \r\n        // Clean up blob URL\r\n        URL.revokeObjectURL(imageUrl);\r\n      }\r\n    });\r\n\r\n    socketRef.current.on('error', (error) => {\r\n      console.error('Camera stream error:', error);\r\n      setError(error.message);\r\n    });\r\n\r\n    // Cleanup on unmount\r\n    return () => {\r\n      if (socketRef.current) {\r\n        socketRef.current.disconnect();\r\n      }\r\n    };\r\n  }, [isAuthenticated]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100 py-6 flex flex-col justify-center sm:py-12\">\r\n      <div className=\"relative py-3 sm:max-w-xl sm:mx-auto\">\r\n        <div className=\"relative px-4 py-10 bg-white mx-8 md:mx-0 shadow rounded-3xl sm:p-10\">\r\n          <div className=\"max-w-md mx-auto\">\r\n            <div className=\"divide-y divide-gray-200\">\r\n              <div className=\"py-8 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7\">\r\n                <h2 className=\"text-2xl font-bold mb-4\">Smart Cart Camera</h2>\r\n                \r\n                {error && (\r\n                  <div className=\"bg-red-50 p-4 rounded-md mb-4\">\r\n                    <p className=\"text-red-700\">{error}</p>\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"relative\">\r\n                  <img\r\n                    ref={videoRef}\r\n                    className=\"w-full h-auto rounded-lg shadow-lg\"\r\n                    alt=\"Camera Stream\"\r\n                  />\r\n                  \r\n                  {!isConnected && (\r\n                    <div className=\"absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 rounded-lg\">\r\n                      <p className=\"text-white\">Connecting to camera...</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {detectedItems.length > 0 && (\r\n                  <div className=\"mt-4\">\r\n                    <h3 className=\"text-lg font-semibold mb-2\">Detected Items:</h3>\r\n                    <ul className=\"space-y-2\">\r\n                      {detectedItems.map((item, index) => (\r\n                        <li key={index} className=\"flex items-center space-x-2\">\r\n                          <span className=\"w-4 h-4 bg-green-500 rounded-full\"></span>\r\n                          <span>{item.name} - {item.confidence}%</span>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CameraView; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}